# Документация проекта "Папи" (Pappi)

## Оглавление
1. [Обзор проекта](#обзор-проекта)
2. [Архитектура](#архитектура)
3. [Функционал](#функционал)
4. [Тестирование](#тестирование)
5. [Интеграция с фронтендом](#интеграция-с-фронтендом)
6. [Руководство разработчика](#руководство-разработчика)
7. [План развития (TODO)](#план-развития)

## Обзор проекта

### Назначение
Pappi - это многофункциональная платформа для владельцев домашних животных, заводчиков, ветеринаров и других специалистов по уходу за животными. Проект объединяет функционал маркетплейса, социальной сети и сервиса для поиска потерянных животных.

### Основные возможности
- Размещение и поиск объявлений о продаже/покупке животных
- Поиск специалистов по уходу за животными
- Сервис для поиска потерянных животных
- Тиндер-механика для подбора питомцев
- Чат между пользователями
- Система верификации пользователей
- Рейтинги и отзывы

### Целевая аудитория
- Владельцы домашних животных
- Заводчики
- Ветеринары и другие специалисты
- Приюты для животных
- Продавцы товаров для животных

### Монетизация
- Комиссия с продаж
- VIP-подписка для продавцов
- Продвижение объявлений
- Платные услуги для специалистов

## Архитектура

### Структура проекта
Проект разделен на следующие приложения:

#### login_auth
- Аутентификация и авторизация пользователей
- Верификация через телефон
- Управление пользователями

#### user_profile
- Профили пользователей
- Управление ролями (продавец, специалист, приют)
- Верификация документов
- Рейтинги пользователей

#### announcements
- CRUD для объявлений
- Категории объявлений
- Модерация контента
- Поиск и фильтрация

#### chat
- Личные сообщения между пользователями
- Уведомления о новых сообщениях
- История переписки

#### kotopsinder
- Тиндер-механика для подбора питомцев
- Система лайков
- Matching система

#### notifications
- Система уведомлений
- Push-уведомления
- Email-рассылки

#### catalog
- Каталог товаров и услуг
- Фильтрация и поиск
- Избранное

## Функционал

### Реализованные возможности

#### Пользователи
- Регистрация через телефон
- Многоуровневая система ролей
- Верификация специалистов и продавцов
- Профили с рейтингом

#### Объявления
- Создание и управление объявлениями
- Категории и подкатегории
- Загрузка изображений
- Модерация контента

#### Коммуникации
- Чат между пользователями
- Система уведомлений
- Отзывы и рейтинги

### Требует доработки

#### Высокий приоритет
- [ ] Интеграция платежной системы
- [ ] API для мобильного приложения
- [ ] Улучшение системы поиска

#### Средний приоритет
- [ ] Расширенные фильтры каталога
- [ ] Геолокация для объявлений
- [ ] Система подписок для специалистов

#### Низкий приоритет
- [ ] Интеграция с социальными сетями
- [ ] Блог/новости
- [ ] Статистика для продавцов

## Тестирование

### Текущее покрытие

#### Unit тесты
- Модели пользователей (90% покрытия)
- Объявления (85% покрытия)
- Чат (70% покрытия)

#### Интеграционные тесты
- Регистрация и авторизация
- Создание и редактирование объявлений
- Взаимодействие через чат

### Запуск тестов
```bash
# Запуск всех тестов
python manage.py test

# Запуск тестов конкретного приложения
python manage.py test announcements
```

## Интеграция с фронтендом

### API Endpoints

#### Пользователи
```
POST /api/auth/register/ - Регистрация
POST /api/auth/login/ - Авторизация
GET /api/users/profile/ - Профиль пользователя
```

#### Объявления
```
GET /api/announcements/ - Список объявлений
POST /api/announcements/ - Создание объявления
GET /api/announcements/{id}/ - Детали объявления
```

### Авторизация
- Используется JWT токен
- Передается в заголовке: `Authorization: Bearer <token>`

## Руководство разработчика

### Установка и настройка

1. Клонирование репозитория:
```bash
git clone https://github.com/larsen66/pappy.git
cd pappy
```

2. Создание виртуального окружения:
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate  # Windows
```

3. Установка зависимостей:
```bash
pip install -r requirements.txt
```

4. Настройка базы данных:
```bash
python manage.py migrate
```

### Переменные окружения
Создайте файл `.env` в корневой директории:
```
DEBUG=True
SECRET_KEY=your-secret-key
DB_NAME=pappi_db
DB_USER=pappi_user
DB_PASSWORD=pappi_password
DB_HOST=localhost
DB_PORT=5432
```

## План развития

### Краткосрочные цели (1-2 месяца)
- Интеграция платежной системы
- Улучшение поиска и фильтрации
- Расширение API

### Среднесрочные цели (3-6 месяцев)
- Мобильное приложение
- Система аналитики
- Расширение функционала для специалистов

### Долгосрочные цели (6+ месяцев)
- Международная версия
- Маркетплейс товаров для животных
- Интеграция с ветеринарными клиниками 